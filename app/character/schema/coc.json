{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "version": "0.0.2",
    "definitions": {
        "skill": {
            "$id": "#skill",
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "value": {"type": "string"},
                "start_value": {"type": "string"},
                "occupation": {"type": "boolean"},
                "checked": {"type": "boolean"}
            },
            "required": [
                "name", "value", "start_value"
            ]
        }
    },
    "type": "object",
    "properties": {
        "meta": {
            "type": "object",
            "properties": {
                "Title": {"type": "string"},
                "Creator": {"type": "string"},
                "CreateDate": {"type": "string"},
                "GameName": {"type": "string"},
                "GameVersion": {"type": "string"},
                "GameType": {
                    "type": "string",
                    "enum": ["Classic (1920's)", "Modern"]
                },
                "Disclaimer": {"type": "string"},
                "Version": {"const": "0.0.2"}
            }
        },
        "personalia": {
            "type": "object",
            "properties": {
                "Name": {"type": "string"},
                "Occupation": {"type": "string"},
                "Gender": {"type": "string"},
                "Age": {"type": "string"},
                "Birthplace": {"type": "string"},
                "Residence": {"type": "string"},
                "Portrait": { "anyOf": [{"type": "string"}, {"type": "null"}] }
            }
        },
        "characteristics": {
            "type": "object",
            "properties": {
                "STR": {"type": "string"},
                "DEX": {"type": "string"},
                "INT": {"type": "string"},
                "CON": {"type": "string"},
                "APP": {"type": "string"},
                "POW": {"type": "string"},
                "SIZ": {"type": "string"},
                "EDU": {"type": "string"},
                "Move": {"type": "string"},
                "Luck": {"type": "string"},
                "LuckMax": {"type": "string"},
                "Sanity": {"type": "string"},
                "SanityStart": {"type": "string"},
                "SanityMax": {"type": "string"},
                "MagicPts": {"type": "string"},
                "MagicPtsMax": {"type": "string"},
                "HitPts": {"type": "string"},
                "HitPtsMax": {"type": "string"}
            },
            "required": ["STR", "DEX", "INT", "CON", "APP", "POW", "SIZ", "EDU",
                         "Move", "Luck", "Sanity", "SanityMax", "MagicPts", "MagicPtsMax",
                         "HitPts", "HitPtsMax"]
        },
        "skills": {
            "type": "array",
            "items": {
                    "allOf": [
                    { "$ref": "#/definitions/skill"},
                    {
                        "properties": {
                            "specializations": {"type": "boolean"}
                    },
                    "if": {
                        "properties": {"specialization": {"const": true}}
                    }, 
                    "then": {
                        "properties": {
                            "subskills": {
                                "type": "array", 
                                "items": { 
                                    "$ref": "#/definitions/skill"
                                    }
                                },
                                "uniqueItems": true
                            }
                        }
                    }]
            },
            "uniqueItems": true
        },
        "weapons": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "regular": {"type": "string"},
                    "damage": {"type": "string"},
                    "range": {"type": "string"},
                    "attacks": {"type": "string"},
                    "ammo": {"type": "string"},
                    "malf": {"type": "string"}
                },
                "required": [
                    "name", "regular", "damage", "range", "attacks", "ammo", "malf"
                ]
            }
        },
        "combat": {
            "type": "object",
            "properties": {
                "DamageBonus": {"type": "string"},
                "Build": {"type": "string"},
                "Dodge": {"type": "string"}
            },
            "required": ["DamageBonus", "Build", "Dodge"]
        },
        "backstory": {
            "type": "object",
            "properties": {
                "description": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "traits": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "ideology": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "injurues": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "people": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "phobias": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "locations": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "tomes": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "possessions": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                },
                "encounters": {
                    "anyOf": [{"type": "string"}, {"type": "null"}]
                }
            }
        },
        "possessions": {
            "anyOf": [{"type": "array"}, {"type": "null"}]
        },
        "cash": {
            "type": "object",
            "properties": {
                "spending": {"type": "string"},
                "cash": {"type": "string"},
                "assets": {"type": "string"}
            }
        },
        "assets": {
            "anyOf": [{"type": "string"}, {"type": "null"}]
        }
    }
}
