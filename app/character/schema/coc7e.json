{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "skill": {
            "$id": "#skill",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "value": {
                    "anyof": [
                        {
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "start_value": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ]
                },
                "occupation": {
                    "type": "boolean"
                },
                "checked": {
                    "type": "boolean"
                }
            },
            "required": [
                "name",
                "value",
                "start_value"
            ]
        }
    },
    "type": "object",
    "required": [
        "version",
        "system",
        "meta",
        "personalia",
        "characteristics"
    ],
    "properties": {
        "version": {
            "const": "0.0.4"
        },
        "system": {
            "const": "coc7e"
        },
        "meta": {
            "type": "object",
            "properties": {
                "Title": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Creator": {
                    "type": "string",
                    "default": "What happened? A TTRPG utility"
                },
                "CreateDate": {
                    "type": "string",
                    "default": ""
                },
                "GameName": {
                    "const": "Call of Cthulhu TM"
                },
                "GameVersion": {
                    "const": "7th Edition"
                },
                "GameType": {
                    "type": "string",
                    "enum": [
                        "Classic (1920's)",
                        "Modern"
                    ],
                    "default": "Classic (1920's)"
                },
                "Disclaimer": {
                    "type": "string",
                    "default": "The developer has not rolled for sanity"
                }
            },
            "required": [
                "Title",
                "GameName",
                "GameVersion",
                "GameType"
            ]
        },
        "personalia": {
            "type": "object",
            "properties": {
                "Name": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Occupation": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Gender": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Age": {
                    "type": "string",
                    "default": "18"
                },
                "Birthplace": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Residence": {
                    "type": "string",
                    "default": "Unknown"
                },
                "Portrait": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                }
            }
        },
        "characteristics": {
            "type": "object",
            "properties": {
                "STR": {
                    "type": "integer",
                    "default": 0
                },
                "DEX": {
                    "type": "integer",
                    "default": 0
                },
                "INT": {
                    "type": "integer",
                    "default": 0
                },
                "CON": {
                    "type": "integer",
                    "default": 0
                },
                "APP": {
                    "type": "integer",
                    "default": 0
                },
                "POW": {
                    "type": "integer",
                    "default": 0
                },
                "SIZ": {
                    "type": "integer",
                    "default": 0
                },
                "EDU": {
                    "type": "integer",
                    "default": 0
                },
                "Move": {
                    "type": "integer",
                    "default": 0
                },
                "Luck": {
                    "type": "integer",
                    "default": 0
                },
                "LuckMax": {
                    "type": "integer",
                    "default": 0
                },
                "Sanity": {
                    "type": "integer",
                    "default": 0
                },
                "SanityStart": {
                    "type": "integer",
                    "default": 0
                },
                "SanityMax": {
                    "type": "integer",
                    "default": 99
                },
                "MagicPts": {
                    "type": "integer",
                    "default": 0
                },
                "MagicPtsMax": {
                    "type": "integer",
                    "default": 0
                },
                "HitPts": {
                    "type": "integer",
                    "default": 1
                },
                "HitPtsMax": {
                    "type": "integer",
                    "default": 1
                }
            },
            "required": [
                "STR",
                "DEX",
                "INT",
                "CON",
                "APP",
                "POW",
                "SIZ",
                "EDU",
                "Move",
                "Luck",
                "Sanity",
                "SanityMax",
                "MagicPts",
                "MagicPtsMax",
                "HitPts",
                "HitPtsMax"
            ]
        },
        "skills": {
            "type": "array",
            "items": {
                "allOf": [
                    {
                        "$ref": "#/definitions/skill"
                    },
                    {
                        "properties": {
                            "specializations": {
                                "type": "boolean"
                            }
                        },
                        "if": {
                            "properties": {
                                "specialization": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "subskills": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/skill"
                                    }
                                },
                                "uniqueItems": true
                            }
                        }
                    }
                ]
            },
            "uniqueItems": true
        },
        "weapons": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "regular": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "default": null
                    },
                    "damage": {
                        "type": "string"
                    },
                    "range": {
                        "type": "string"
                    },
                    "attacks": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "integer"
                            }
                        ],
                        "default": 1
                    },
                    "ammo": {
                        "anyOf": [
                            {
                                "const": "-"
                            },
                            {
                                "type": "integer"
                            }
                        ],
                        "default": "-"
                    },
                    "malf": {
                        "anyOf": [
                            {
                                "const": "-"
                            },
                            {
                                "type": "integer"
                            }
                        ],
                        "default": "-"
                    }
                },
                "required": [
                    "name",
                    "regular",
                    "damage",
                    "range",
                    "attacks",
                    "ammo",
                    "malf"
                ]
            }
        },
        "combat": {
            "type": "object",
            "properties": {
                "DamageBonus": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                },
                "Build": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                },
                "Dodge": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                }
            },
            "required": [
                "DamageBonus",
                "Build",
                "Dodge"
            ]
        },
        "backstory": {
            "type": "object",
            "properties": {
                "description": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "traits": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "ideology": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "injurues": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "people": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "phobias": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "locations": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "tomes": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "possessions": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                },
                "encounters": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null
                }
            }
        },
        "possessions": {
            "anyOf": [
                {
                    "type": "array"
                },
                {
                    "type": "null"
                }
            ],
            "default": null
        },
        "cash": {
            "type": "object",
            "properties": {
                "spending": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                },
                "cash": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                },
                "assets": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ],
                    "default": 0
                }
            }
        },
        "assets": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "default": null
        }
    }
}